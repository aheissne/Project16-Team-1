<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Scaffolding - Quiz Results</title>
  <style>
    body{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#4a4a4a;display:flex;justify-content:center;align-items:center;height:100vh}
    .results-container{background:#fff;padding:20px;border-radius:10px;text-align:center;width:300px;box-shadow:0 0 10px rgba(0,0,0,.5)}
    .title{color:#000;font-size:1.5em;margin-bottom:20px}
    .score{color:#000;font-size:1.2em;margin-bottom:20px}
    .word-list{text-align:left;margin-bottom:20px}
    .word-list div{color:#000;margin:5px 0}
    .correct{color:#34a853}
    .incorrect{color:#ea4335}
    .buttons{background:#d7a9e3;color:#1a73e8;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;width:100%}
    .footer{margin-top:40px;color:#667;font-size:.8em}
  </style>
</head>
<body>
  <div class="results-container">
    <div class="title">Quiz Results</div>
    <div class="score" id="score">Score: 0 out of 5</div>
    <div class="word-list" id="wordList"></div>
    <div>
      <button class="buttons" onclick="restartQuiz()">Restart Quiz</button>
      <button class="buttons" onclick="goBack()">Back to Dashboard</button>
    </div>
  </div>
  <div class="footer">
    <div>Contact Support: <a href="mailto:support@scafwording.app">support@scafwording.app</a></div>
    <div>©2024 Scafwording. All Rights Reserved</div>
  </div>

  <!-- ONE script block only -->
<script>
  const words = ["cursory","insipid","loquacious","flout","serendipity"];
  const totalWords = words.length;
  const score = parseInt(localStorage.getItem('quizScore')) || 0;
  const incorrectWords = new Set(JSON.parse(localStorage.getItem('incorrectWords')) || []);

// ✅ Update learnedWords list to only include correct words
const learned = [];
words.forEach((word, i) => {
  const isCorrect = !incorrectWords.has(i);
  if (isCorrect) learned.push(word);
});
localStorage.setItem('learnedWords', JSON.stringify(learned));


  function updateResults(){
    document.getElementById('score').textContent = `Score: ${score} out of ${totalWords}`;
    const list = document.getElementById('wordList');
    list.innerHTML = '';
    words.forEach((word, i) => {
      const isCorrect = !incorrectWords.has(i);   // <-- use i, not index; no saving here
      const div = document.createElement('div');
      div.textContent = `${word}: ${isCorrect ? 'Correct' : 'Incorrect'}`;
      div.classList.add(isCorrect ? 'correct' : 'incorrect');
      list.appendChild(div);
    });
  }

  function restartQuiz(){
    localStorage.setItem('quizScore', 0);
    localStorage.setItem('incorrectWords', JSON.stringify([]));
    window.location.href = 'learn-quiz.html?index=0';
  }

  function goBack(){
    window.location.href = 'welcome.html?index=0';
  }

  document.addEventListener('DOMContentLoaded', updateResults);
</script>

</body>
</html>
