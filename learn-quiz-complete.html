<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Scaffwording - Quiz Complete</title>
  <style>
    body{font-family:Arial,sans-serif;margin:0;padding:0;background:#4a4a4a;display:flex;justify-content:center;align-items:center;height:100vh}
    .complete-container{background:#fff;padding:20px;border-radius:10px;text-align:center;width:320px;box-shadow:0 0 10px rgba(0,0,0,.4)}
    .message{color:#1a73e8;font-size:1.6em;margin-bottom:15px}
    .score{color:#000;font-size:1.2em;margin-bottom:20px}
    .buttons{display:flex;flex-direction:column;gap:10px}
    button{padding:10px 20px;border:none;border-radius:5px;color:#fff;cursor:pointer;font-size:1em}
    .restart{background:#34a853}
    .view-results{background:#4285f4}
    .restart:hover{background:#2d8445}
    .view-results:hover{background:#306ac3}
    .footer{margin-top:40px;color:#ccc;font-size:.8em;text-align:center}
  </style>
</head>
<body>
  <div class="complete-container">
    <div class="xp-bar" id="xpDisplay" style="margin: 20px 0; font-weight: bold; color: #1a73e8;">
        Loading XP...
        </div>
    <div class="message">üéâ Congratulations! You've completed the quiz!</div>
    <div class="score" id="score">Score: 0 out of 0</div>
    <div class="buttons">
      <button class="restart" onclick="restartQuiz()">Restart Quiz</button>
    <button class="view-results" onclick="window.location.href='quiz-results.html'">View Results</button>

    </div>
  </div>
  <div class="footer">
    <div>Contact Support: <a href="mailto:support@scaffwording.app">support@scaffwording.app</a></div>
    <div>¬©2024 Scaffwording. All Rights Reserved</div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const SELECTED = JSON.parse(localStorage.getItem('selectedWordIds') || '[]');
      const total = Number(localStorage.getItem('maxQuestions')) || SELECTED.length || 5;
      const score = Math.min(Number(localStorage.getItem('quizScore') || '0'), total);
      document.getElementById('score').textContent = `Score: ${score} out of ${total}`;
    });

    function restartQuiz(){
  localStorage.setItem('quizScore', '0');
  localStorage.setItem('incorrectWords', JSON.stringify([]));
  localStorage.removeItem('attemptsMap');      // ‚Üê ADD THIS
  window.location.href = 'learn-quiz.html?index=0';
}

  </script>
  <script src="xp.js"></script>
  <script>
  renderXP('xpDisplay');
  document.querySelector('.xp-fill').style.width = 
  ((getXP() % XP_PER_LEVEL) / XP_PER_LEVEL * 100) + '%';
</script>
</body>
</html>
